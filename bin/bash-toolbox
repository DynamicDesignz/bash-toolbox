#!/bin/bash
#$ @{version} - environment
#$
#$ Load all base functions and run script based in Bash-Toolbox
#$ environment.
#$
#$ Usage:
#$   bash-toolbox [SOURCE] ...
#$

#@ bash-toolbox(1) -- Bash-Toolbox Environment
#@ ===========================================
#@
#@ ## SYNOPSIS
#@
#@ `#!/usr/bin/env bash-toolbox`
#@
#@ `source <bash-toolbox-library>`
#@
#@ ## DESCRIPTION
#@
#@ `bash-toolbox` load `base.sh` library and run current source using all
#@ libraries available.
#@
#@ ## ENVIRONMENT
#@
#@ * `BASH_TOOLBOX_VERSION` :
#@
#@   Array that contains major, minor, patch and build respectively version
#@   information.
#@
#@ ### Applications
#@
#@ * `bake`, bash-toolbox make.
#@ * `bdoc`, bash-toolbox documentation.
#@ * `bcmd`, bash-toolbox command runner.
#@
#@ ## AUTHOR
#@
#@ Written by Hallison Batista &lt;hallison@codigorama.com&gt;
#@
#@ ## COPYRIGHT
#@
#@ Copyright (C) 2009, 2010, 2011 Codigorama &lt;opensource@codigorama.com&gt;
#@
#@ Permission is hereby granted, free of charge, to any person obtaining a
#@ copy of this software and associated documentation files (the "Software"),
#@ to deal in the Software without restriction, including without limitation
#@ the rights to use, copy, modify, merge, publish, distribute, sublicense,
#@ and/or sell copies of the Software, and to permit persons to whom the
#@ Software is furnished to do so, subject to the following conditions:
#@ 
#@ The above copyright notice and this permission notice shall be included in
#@ all copies or substantial portions of the Software.
#@ 
#@ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
#@ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
#@ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
#@ THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
#@ LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
#@ FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
#@ DEALINGS IN THE SOFTWARE.
#@
#@ ## SEE ALSO
#@
#@ [bash-toolbox(7)](bash-toolbox.7.html), [base(3)](base.3.html),
#@ [bake(1)](bake.1.html), [bdoc(1)](bdoc.1.html), [bcmd(1)](bcmd.1.html)
#@

shopt -s sourcepath

: ${NULL:=/dev/null}
: ${STDIN:=/dev/stdin}
: ${STDOUT:=/dev/stdout}
: ${STDERR:=/dev/stderr}

# Bash-Toolbox constants
BASH_TOOLBOX_VERSION="${version:-Bash-Toolbox v0.0.0 ($(date +%F)) Development}"

# Bash Toolbox directories
BASH_TOOLBOX_PATH="${prefix:-${PWD}}"
BASH_TOOLBOX_BIN="${bindir:-${BASH_TOOLBOX_PATH}/bin}"
BASH_TOOLBOX_ETC="${sysconfdir:-${BASH_TOOLBOX_PATH}/etc}"
BASH_TOOLBOX_LIB="${libdir:-${BASH_TOOLBOX_PATH}/lib}"
BASH_TOOLBOX_SHARE="${datadir:-${BASH_TOOLBOX_PATH}}"

# Global constants
PATH="${BASH_TOOLBOX_LIB}:${PATH}"
TMP=${TMP:-/tmp}

source base.sh

if ! test ${#} -eq 0; then
  declare script=${1:?"source is required"}
  shift
  source $(readlink -f "${script}") "${@}"
else
  echo "BASH_TOOLBOX_VERSION='$BASH_TOOLBOX_VERSION'"
  echo "BASH_TOOLBOX_PATH=$BASH_TOOLBOX_PATH"
  echo "BASH_TOOLBOX_BIN=$BASH_TOOLBOX_BIN"
  echo "BASH_TOOLBOX_ETC=$BASH_TOOLBOX_ETC"
  echo "BASH_TOOLBOX_LIB=$BASH_TOOLBOX_LIB"
  echo "BASH_TOOLBOX_SHARE=$BASH_TOOLBOX_SHARE"
  echo "PATH=${PATH}"
  exit 0
fi

# vim: filetype=sh

